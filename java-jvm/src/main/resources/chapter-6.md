### 类文件结构
代码编译的结果从本地机器码转变为字节码, 是存储格式发展的一小步, 却是编程语言发展的一大步

#### 概述
计算机虽然只能识别 0 和 1, 当由于近十年来虚拟机以及大量建立在虚拟机上的程序语言如雨后春笋出现并蓬勃发展, 将编写的程序编译成二进制本地机器码 (Native Code) 已不再是唯一的选择, 越来越多的程序选择了与操作系统和机器指令集无关的, 平台中立的格式作为程序编译后的存储格式

#### 无关性基石  
- 虚拟机和字节码是构成平台无关性的基石
- 虚拟机和字节码也是实现语言无关性的基础

Java 虚拟机不和包括 Java 在内的任何语言绑定, 它只与 "Class 文件" 这种特定的二进制文件格式所关联, Class 文件中包含了 Java 虚拟机指令集和符号表以及若干其他辅助信息; 基于安全方面的考虑, Java 虚拟机规范要求在 Class 文件中使用许多强制性的语法和结构化约束, 但任何一门功能性语言都可以表示为一个能被 Java 虚拟机所接受的有效的 Class 文件; 作为一个通用的, 机器无关的执行平台, 任何其他语言的实现者都可以将 Java 虚拟机作为语言的产品交付媒介

#### Class 类文件的结构
Class 文件是一组以 8 位字节为基础单位的二进制流, 各个数据项目严格按照顺序紧凑的排列在 Class 文件中, 中间没有添加任何分隔符, 这使得整个 Class 文件中存储的内容几乎全部是程序运行的必要数据, 没有空隙存在; 当遇到需要占用 8 位字节以上空间的数据项时, 则会高位在前的方式分隔成若干个 8 位字节进行存储  
根据 Java 虚拟机规范的规定, Class　文件格式采用一种类似于 C 语言结构的伪结构来存储数据, 这种伪结构中只有两种数据类型: 无符号数和表, 后面的解析都要以这两种数据类型为基础
- 无符号数: 属于基本的数据类型, 以 u1, u2, u4, u8 来分别代表 1 个字节, 2 个字节, 4 个字节, 8 个字节的无符号数, 无符号数可以用来描述数字, 索引引用, 数量值或者按照 UTF-8 编码构成字符串值
- 表: 由多个无符号数或者其他表作为数据项构成的复合数据类型, 所有表都习惯性的以 "\_info" 结尾, 表用于描述有层次关系的复合结构的数据, 整个 Class 文件本质上就是一张表

Class 文件格式

|类型|名称|数量|  
|-|-|-|
|u4|magic|1|
|u2|minor_version|1|
|u2|major_version|1|
|u2|constant_pool_count|1|
|cp_info|constant_pool|constant_pool_count - 1|
|u2|access_flags|1|
|u2|this_class|1|
|u2|super_class|1|
|u2|interfaces_count|1|
|u2|interfaces|interfaces_count|
|u2|fields_count|1|
|field_info|fields|fields_count|
|u2|methods_count|1|
|method_info|methods|methods_count|
|u2|attributes_count|1|
|attribute_info|attributes|attributes_count|

无论是无符号数还是表, 当需要描述同一类但数量不定的多个数据时, 经常会使用一个前置的容量计数器加若干个连续的数据项的形式, 这时称这一系列连续的某一类型的数据为某以类型的集合

##### 魔术与 Class 文件的版本
